@import './tailwind.config.css';
@import './themes.css';
@import './print.css';

@layer base {
    :root {
        --main-hue: 0;
        --selection-color: hsl(200, 35%, 50%); /* Fallback before JS loads */
        --max-w-size: 1280px;
        --paragraph-max-width: 80ch;
    }

    /* Smooth selection color animation - controlled by JavaScript */

    /* Prevent any horizontal overflow */
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    /* Only apply max-width to specific elements that could cause overflow */
    img,
    video,
    iframe,
    embed,
    object {
        max-width: 100%;
        height: auto;
    }

    /* Tech font optimization and global transitions */
    * {
        font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        border-color: var(--color-main);
    }

    /* Screen reader only class */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    body {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 400;
        font-variant-numeric: tabular-nums;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 600;
        letter-spacing: -0.025em;
    }

    code,
    pre,
    .mono {
        font-family: 'Fira Code', 'Cascadia Code', 'SF Mono', monospace;
        font-weight: 400;
        font-variant-ligatures: none;
    }

    ::selection {
        background: var(--selection-color, hsl(200, 35%, 50%));
        color: var(--color-secondary);
        font-weight: 700 !important;
    }

    a::selection {
        background: var(--selection-color, hsl(200, 35%, 50%));
        color: var(--color-secondary);
    }

    /* Selection color is now fully controlled by JavaScript animator */

    /* No transitions needed - color updates every frame */
    *:focus {
        /* outline: 3px solid #2b90d4 !important; */
        outline-offset: 3px;
        scroll-margin: 0;
    }

    /* Prevent scroll-to-element for header navigation elements */
    header *:focus {
        scroll-margin: 0;
    }

    html {
        overflow-x: hidden;
        overflow-y: visible;
        max-width: 100vw;
        height: 100%;
        scroll-behavior: smooth;
        scroll-padding-top: 3rem; /* 48px for header offset */
    }

    body {
        margin: 0;
        padding: 0;
        /* Remove overflow-x: hidden from body to allow sticky positioning */
        overflow-y: visible;
        max-width: 100vw;
        min-height: 100vh;
        position: relative;
    }

    /* 
     * Theme Color System
     * 
     * Themes are now managed by themes.js and injected dynamically.
     * Only base theme structure remains here.
     * 
     * Theme variables:
     * - --theme-colorful: The vibrant brand/theme color
     * - --theme-contrasty: The neutral contrasting color
     * 
     * Mode assignment:
     * - Light mode: contrasty text on colorful background
     * - Dark mode: colorful text on contrasty background
     */

    /* Enhanced CRT Effect - Pure Overlay */
    .crt-effect::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
        overflow: hidden;

        /* Scanlines suaves y estables */
        background: repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.12) 0px, rgba(0, 0, 0, 0.12) 1px, transparent 1px, transparent 3px);
        animation: crt-scanlines 1.2s linear infinite;
    }

    /* Phosphor glow effect sutil */
    .crt-effect {
        filter: contrast(1.1) saturate(1.3);
    }

    .crt-effect * {
        text-shadow:
            0 0 1px currentColor,
            0 0 2px rgba(255, 255, 255, 0.1);
    }

    /* Sin flicker effect para menos distracci√≥n */
    /* .crt-effect {
        animation: none;
    } */

    /* Animaciones suaves para CRT */
    @keyframes crt-scanlines {
        0% {
            transform: translateY(0);
        }
        100% {
            transform: translateY(3px);
        }
    }
}
.wavy {
    background-color: var(--color-main);
    --mask:
        radial-gradient(4.13px at 50% calc(100% + 0.9px), #0000 calc(99% - 2px), var(--color-main) calc(101% - 2px) 99%, #0000 101%) calc(50% - 6px)
            calc(50% - 2.5px + 0.5px) / 12px 5px repeat-x,
        radial-gradient(4.13px at 50% -0.9px, #0000 calc(99% - 2px), var(--color-main) calc(101% - 2px) 99%, #0000 101%) 50% calc(50% + 2.5px) / 12px 5px
            repeat-x;
    -webkit-mask: var(--mask);
    mask: var(--mask);
}

/* Corner crosses utility */
.corner-crosses {
    position: relative;
}

.corner-crosses::before,
.corner-crosses::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    pointer-events: none;
}

/* Top-left and top-right crosses */
.corner-crosses::before {
    top: -0.5px;
    left: -0.5px;
    background-image: linear-gradient(to right, var(--color-main) 1px, transparent 1px), linear-gradient(to bottom, var(--color-main) 1px, transparent 1px);
    background-position:
        0 3.5px,
        3.5px 0;
    background-size:
        8px 1px,
        1px 8px;
    background-repeat: no-repeat;
}

.corner-crosses::after {
    top: -0.5px;
    right: -0.5px;
    background-image: linear-gradient(to left, var(--color-main) 1px, transparent 1px), linear-gradient(to bottom, var(--color-main) 1px, transparent 1px);
    background-position:
        0 3.5px,
        4.5px 0;
    background-size:
        8px 1px,
        1px 8px;
    background-repeat: no-repeat;
}
.diagonal-stripe {
    background-image: repeating-linear-gradient(315deg, var(--color-main) 0 1px, var(--color-secondary) 1px 2px, transparent 0px 50%);
    background-size: 7px 7px;
    background-attachment: local;
    background-repeat: repeat;
}

/* Prose content styling for project pages */
.prose {
    & h1 {
        font-size: 2.5rem !important;
        line-height: 1.2 !important;
        margin-top: 2rem !important;
        margin-bottom: 1.5rem !important;
    }

    & h2 {
        font-size: 2rem !important;
        line-height: 1.3 !important;
        margin-top: 2rem !important;
        margin-bottom: 1rem !important;
    }

    & h3 {
        font-size: 1.5rem !important;
        line-height: 1.4 !important;
        margin-top: 1.5rem !important;
        margin-bottom: 1rem !important;
    }

    & h4 {
        font-size: 1.25rem !important;
        line-height: 1.4 !important;
        margin-top: 1.5rem !important;
        margin-bottom: 0.75rem !important;
    }

    & p {
        margin-top: 1.5rem !important;
        margin-bottom: 1.5rem !important;
    }

    & ul,
    & ol {
        margin-top: 1.5rem !important;
        margin-bottom: 1.5rem !important;
    }

    & li {
        margin-top: 0.5rem !important;
        margin-bottom: 0.5rem !important;
    }

    & blockquote {
        margin-top: 2rem !important;
        margin-bottom: 2rem !important;
    }

    & pre,
    & img {
        margin-top: 2rem !important;
        margin-bottom: 2rem !important;
    }
}

p {
    max-width: 80ch;

    text-wrap: pretty;
}
