@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --main-hue: 0;
        --selection-opacity: 0.8;
        --user-selection-color: hsl(var(--main-hue), 80%, 50%);
    }

    /* Tech font optimization */
    * {
        font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        border-color: var(--color-main);
    }

    body {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 400;
        font-variant-numeric: tabular-nums;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 600;
        letter-spacing: -0.025em;
    }

    code,
    pre,
    .mono {
        font-family: 'JetBrains Mono', 'IBM Plex Mono', monospace;
        font-weight: 400;
        font-variant-ligatures: none;
    }

    ::selection {
        background: var(--user-selection-color);
        color: var(--color-secondary);
        font-weight: 700 !important;
    }

    a::selection {
        background: var(--user-selection-color);
        color: var(--color-secondary);
    }

    /* No transitions needed - color updates every frame */
    *:focus {
        /* outline: 3px solid #2b90d4 !important; */
        outline-offset: 3px;
    }

    :root {
        overflow-x: hidden;
    }

    /* 
     * Theme Color Abstraction System
     * 
     * Each theme defines:
     * - --theme-colorful: The vibrant brand/theme color
     * - --theme-contrasty: The neutral contrasting color
     * 
     * The system automatically assigns:
     * Light mode: colorful text on contrasty background (more readable)
     * Dark mode: contrasty text on colorful background (more vivid)
     * 
     * This makes it intuitive to choose which color should be prominent in each mode
     */

    /* Default theme - Void subtle */
    :root {
        --theme-colorful: #f8f9fa;
        --theme-contrasty: #0d1117;

        /* Light mode: contrasty text on colorful background (light bg) */
        --color-main: var(--theme-contrasty);
        --color-secondary: var(--theme-colorful);
    }

    html.dark {
        /* Dark mode: colorful text on contrasty background (dark bg) */
        --color-main: var(--theme-colorful);
        --color-secondary: var(--theme-contrasty);
    }

    /* Void theme */
    :root[data-theme='void'] {
        --theme-colorful: #f8f9fa; /* Subtle off-white */
        --theme-contrasty: #0d1117; /* GitHub dark */
    }

    /* Phantom theme */
    :root[data-theme='phantom'] {
        --theme-colorful: #39ff14; /* Matrix green (INTENSE) */
        --theme-contrasty: #0a1a0a; /* Very dark green */
    }

    /* Bloom theme */
    :root[data-theme='bloom'] {
        --theme-colorful: #ff6b9d; /* Cherry blossom pink */
        --theme-contrasty: #2d1b20; /* Dark rose */
    }

    /* Crimson theme */
    :root[data-theme='crimson'] {
        --theme-colorful: #ff073a; /* Blood red (INTENSE) */
        --theme-contrasty: #220a0a; /* Very dark red */
    }

    /* Azure theme */
    :root[data-theme='azure'] {
        --theme-colorful: #007fff; /* Azure blue */
        --theme-contrasty: #0a1a2e; /* Dark navy */
    }

    /* Volt theme */
    :root[data-theme='volt'] {
        --theme-colorful: #ffff00; /* Electric yellow (INTENSE) */
        --theme-contrasty: #2e2e0a; /* Dark olive */
    }

    /* Forest theme */
    :root[data-theme='forest'] {
        --theme-colorful: #228b22; /* Forest green */
        --theme-contrasty: #0f1f0f; /* Dark forest */
    }

    /* Ember theme */
    :root[data-theme='ember'] {
        --theme-colorful: #ff6347; /* Tomato ember */
        --theme-contrasty: #2e1a0f; /* Dark ember */
    }

    /* Flame theme */
    :root[data-theme='flame'] {
        --theme-colorful: #ff4500; /* Orange flame */
        --theme-contrasty: #2e1500; /* Dark flame */
    }

    /* Violet theme */
    :root[data-theme='violet'] {
        --theme-colorful: #9932cc; /* Dark orchid */
        --theme-contrasty: #1a0f2e; /* Dark purple */
    }

    /* Plasma theme */
    :root[data-theme='plasma'] {
        --theme-colorful: #00ffff; /* Electric cyan (INTENSE) */
        --theme-contrasty: #0a2e2e; /* Dark teal */
    }

    /* Solar theme */
    :root[data-theme='solar'] {
        --theme-colorful: #ffa500; /* Golden orange */
        --theme-contrasty: #2e1f0a; /* Dark gold */
    }

    /* Frost theme */
    :root[data-theme='frost'] {
        --theme-colorful: #4fbdba; /* Ice blue */
        --theme-contrasty: #0f2e2d; /* Dark frost */
    }

    /* Neon theme */
    :root[data-theme='neon'] {
        --theme-colorful: #ff00ff; /* Pure magenta (INTENSE) */
        --theme-contrasty: #2e0a2e; /* Dark magenta */
    }

    /* Pulse theme */
    :root[data-theme='pulse'] {
        --theme-colorful: #ff1493; /* Deep pink */
        --theme-contrasty: #2e0f1f; /* Dark pink */
    }

    /* Prism theme - Uses user selection color */
    :root[data-theme='prism'] {
        --theme-colorful: var(--user-selection-color); /* Dynamic user selection color */
        --theme-contrasty: #1a1a1a; /* Dark gray */
    }

    /* Enhanced CRT Effect - Pure Overlay */
    .crt-effect::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;

        /* Scanlines suaves y estables */
        background: repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.12) 0px, rgba(0, 0, 0, 0.12) 1px, transparent 1px, transparent 3px);
        animation: crt-scanlines 1.2s linear infinite;
    }

    .crt-effect::after {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9998;

        /* CRT shadows mejoradas - no tapan contenido */
        background: 
            /* Vignette principal más sutil */
            radial-gradient(
                ellipse 95% 95% at center,
                transparent 75%,
                rgba(0, 0, 0, 0.05) 85%,
                rgba(0, 0, 0, 0.1) 92%,
                rgba(0, 0, 0, 0.2) 96%,
                rgba(0, 0, 0, 0.4) 98%,
                rgba(0, 0, 0, 0.6) 100%
            ),
            /* Sombras laterales finas */
                linear-gradient(
                    90deg,
                    rgba(0, 0, 0, 0.5) 0%,
                    rgba(0, 0, 0, 0.3) 2%,
                    rgba(0, 0, 0, 0.1) 4%,
                    transparent 6%,
                    transparent 94%,
                    rgba(0, 0, 0, 0.1) 96%,
                    rgba(0, 0, 0, 0.3) 98%,
                    rgba(0, 0, 0, 0.5) 100%
                ),
            /* Sombras verticales finas */
                linear-gradient(
                    0deg,
                    rgba(0, 0, 0, 0.4) 0%,
                    rgba(0, 0, 0, 0.2) 1%,
                    rgba(0, 0, 0, 0.1) 2%,
                    transparent 4%,
                    transparent 96%,
                    rgba(0, 0, 0, 0.1) 98%,
                    rgba(0, 0, 0, 0.2) 99%,
                    rgba(0, 0, 0, 0.4) 100%
                ),
            /* Esquinas sutiles para profundidad */ radial-gradient(ellipse 60px 40px at 0% 0%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%),
            radial-gradient(ellipse 60px 40px at 100% 0%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%),
            radial-gradient(ellipse 60px 40px at 0% 100%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%),
            radial-gradient(ellipse 60px 40px at 100% 100%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%);
    }

    /* Phosphor glow effect sutil */
    .crt-effect {
        filter: contrast(1.1) brightness(1.05) saturate(1.5);
    }

    .crt-effect * {
        text-shadow:
            0 0 1px currentColor,
            0 0 2px rgba(255, 255, 255, 0.1);
    }

    /* Sin flicker effect para menos distracción */
    /* .crt-effect {
        animation: none;
    } */

    /* Animaciones suaves para CRT */
    @keyframes crt-scanlines {
        0% {
            transform: translateY(0);
        }
        100% {
            transform: translateY(3px);
        }
    }
}
.wavy {
    background-color: var(--color-main);
    --mask: radial-gradient(4.13px at 50% calc(100% + 0.9px), #0000 calc(99% - 2px), var(--color-main) calc(101% - 2px) 99%, #0000 101%) calc(50% - 6px)
            calc(50% - 2.5px + 0.5px) / 12px 5px repeat-x,
        radial-gradient(4.13px at 50% -0.9px, #0000 calc(99% - 2px), var(--color-main) calc(101% - 2px) 99%, #0000 101%) 50% calc(50% + 2.5px) / 12px 5px
            repeat-x;
    -webkit-mask: var(--mask);
    mask: var(--mask);
}
