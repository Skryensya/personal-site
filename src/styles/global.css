@import './tailwind.config.css';
@import './print.css';
@import './typography.css';

/* * {
    border: 0.5px solid rgba(255, 0, 0, 0.3);
} */

@layer base {
    :root {
        --main-hue: 0;
        --selection-color: hsl(200, 35%, 50%);
        --max-w-size: 1280px;
        --paragraph-max-width: 80ch;
        /* Typography scale (responsive) */
        --fs-h1: clamp(2.25rem, 3vw + 1rem, 4.5rem); /* ≈ text-4xl → 7xl */
        --fs-h2: clamp(1.75rem, 1.6vw + 1rem, 3rem); /* ≈ text-2xl → 5xl */
        --fs-h3: clamp(1.5rem, 1.1vw + 0.9rem, 2rem); /* ≈ text-xl → 3xl */
        --fs-h4: clamp(1.25rem, 0.6vw + 0.9rem, 1.5rem); /* ≈ text-lg → 2xl */
        --fs-body: 1.125rem; /* 18px */
        --fs-body-sm: 1rem; /* 16px (mínimo) */
        --lh-tight: 1.15;
        --lh-snug: 1.25;
        --lh-normal: 1.5;
    }

    /* Smooth selection color animation - controlled by JavaScript */

    /* Prevent any horizontal overflow */
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    /* Only apply max-width to specific elements that could cause overflow */
    img,
    video,
    iframe,
    embed,
    object {
        max-width: 100%;
        height: auto;
        /* Prevent layout shifts with content-visibility */
        content-visibility: auto;
    }

    /* Optimize images for performance and prevent layout shifts */
    img {
        /* Prevent dragging */
        -webkit-user-drag: none;
        -khtml-user-drag: none;
        -moz-user-drag: none;
        -o-user-drag: none;
        /* Better image rendering */
        image-rendering: auto;
        image-rendering: -webkit-optimize-contrast;
        /* Prevent selection */
        -webkit-user-select: none;
        user-select: none;
    }

    /* Performance optimizations for heavy content */
    .performance-optimized {
        contain: layout style paint;
        content-visibility: auto;
        contain-intrinsic-size: auto 500px;
    }

    /* Tech font optimization and global transitions */
    * {
        font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        border-color: var(--color-main);
    }

    /* Screen reader only class */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    /* No transitions needed - color updates every frame */
    *:focus {
        /* outline: 3px solid #2b90d4 !important; */
        outline-offset: 3px;
        scroll-margin: 0;
    }

    /* Prevent scroll-to-element for header navigation elements */
    header *:focus {
        scroll-margin: 0;
    }

    html {
        overflow-y: visible;
        max-width: 100vw;
        height: 100%;
        scroll-behavior: smooth;
        scroll-padding-top: 3rem; /* 48px for header offset */
        scrollbar-gutter: stable;
    }

    body {
        margin: 0;
        padding: 0;
        /* Remove overflow-x: hidden from body to allow sticky positioning */
        overflow-y: visible;
        max-width: 100vw;
        min-height: 100vh;
        position: relative;
    }

    /* Remove scrollbar gutter reservation on mobile */
    @media (max-width: 767px) {
        html {
            scrollbar-gutter: auto;
        }
    }

    /* 
     * Theme Color System
     * 
     * Themes are now managed by themes.js and injected dynamically.
     * Only base theme structure remains here.
     * 
     * Theme variables:
     * - --theme-colorful: The vibrant brand/theme color
     * - --theme-contrasty: The neutral contrasting color
     * 
     * Mode assignment:
     * - Light mode: contrasty text on colorful background
     * - Dark mode: colorful text on contrasty background
     */

    /* Instant theme changes - no color blending */
    ::view-transition-old(root),
    ::view-transition-new(root) {
        animation: none;
    }

    /* Configure navbar to be static during View Transitions */
    ::view-transition-group(navbar) {
        animation: none;
        z-index: 9999;
    }

    ::view-transition-old(navbar),
    ::view-transition-new(navbar) {
        animation: none;
    }

    /* Respect reduced motion preferences */
    @media (prefers-reduced-motion: reduce) {
        ::view-transition-old(root),
        ::view-transition-new(root) {
            animation-duration: 0.01s;
        }
    }
}

/* Corner crosses utility */
.corner-crosses {
    position: relative;
}

.corner-crosses::before,
.corner-crosses::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    pointer-events: none;
}

/* Top-left and top-right crosses */
.corner-crosses::before {
    top: -0.5px;
    left: -0.5px;
    background-image: linear-gradient(to right, var(--color-main) 1px, transparent 1px), linear-gradient(to bottom, var(--color-main) 1px, transparent 1px);
    background-position:
        0 3.5px,
        3.5px 0;
    background-size:
        8px 1px,
        1px 8px;
    background-repeat: no-repeat;
}

.corner-crosses::after {
    top: -0.5px;
    right: -0.5px;
    background-image: linear-gradient(to left, var(--color-main) 1px, transparent 1px), linear-gradient(to bottom, var(--color-main) 1px, transparent 1px);
    background-position:
        0 3.5px,
        4.5px 0;
    background-size:
        8px 1px,
        1px 8px;
    background-repeat: no-repeat;
}
.diagonal-stripe {
    background-image: repeating-linear-gradient(315deg, var(--color-main) 0 1px, var(--color-secondary) 1px 2px, transparent 0px 50%);
    background-size: 7px 7px;
    background-attachment: local;
    background-repeat: repeat;
}

p {
    max-width: 80ch;

    text-wrap: pretty;
}

/* Typography utilities moved to typography.css */
