@import './tailwind.config.css';
@import './themes.css';

@layer base {
    :root {
        --main-hue: 0;
        --selection-opacity: 0.8;
        --user-selection-color: hsl(var(--main-hue), 80%, 50%);
        --max-w-size: 1280px;
    }

    /* Tech font optimization */
    * {
        font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        border-color: var(--color-main);
    }

    /* Universal color transitions for theme changes - applies to all elements */
    *,
    *::before,
    *::after {
        transition: 
            color 600ms ease-out,
            background-color 600ms ease-out,
            border-color 600ms ease-out,
            fill 600ms ease-out,
            stroke 600ms ease-out,
            background-image 600ms ease-out;
    }

    /* Instant hover effects - override transitions on hover */
    *:hover,
    *:hover::before,
    *:hover::after {
        transition: none !important;
    }

    body {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 400;
        font-variant-numeric: tabular-nums;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 600;
        letter-spacing: -0.025em;
    }

    code,
    pre,
    .mono {
        font-family: 'JetBrains Mono', 'IBM Plex Mono', monospace;
        font-weight: 400;
        font-variant-ligatures: none;
    }

    ::selection {
        background: var(--user-selection-color);
        color: var(--color-secondary);
        font-weight: 700 !important;
    }

    a::selection {
        background: var(--user-selection-color);
        color: var(--color-secondary);
    }

    /* No transitions needed - color updates every frame */
    *:focus {
        /* outline: 3px solid #2b90d4 !important; */
        outline-offset: 3px;
    }

    :root {
        overflow-x: hidden;
    }

    /* 
     * Theme Color System
     * 
     * Themes are now managed by themes.js and injected dynamically.
     * Only base theme structure remains here.
     * 
     * Theme variables:
     * - --theme-colorful: The vibrant brand/theme color
     * - --theme-contrasty: The neutral contrasting color
     * 
     * Mode assignment:
     * - Light mode: contrasty text on colorful background
     * - Dark mode: colorful text on contrasty background
     */

    /* Enhanced CRT Effect - Pure Overlay */
    .crt-effect::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;

        /* Scanlines suaves y estables */
        background: repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.12) 0px, rgba(0, 0, 0, 0.12) 1px, transparent 1px, transparent 3px);
        animation: crt-scanlines 1.2s linear infinite;
    }

    .crt-effect::after {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9998;

        /* CRT shadows mejoradas - no tapan contenido */
        background: 
            /* Vignette principal más sutil */
            radial-gradient(
                ellipse 95% 95% at center,
                transparent 75%,
                rgba(0, 0, 0, 0.05) 85%,
                rgba(0, 0, 0, 0.1) 92%,
                rgba(0, 0, 0, 0.2) 96%,
                rgba(0, 0, 0, 0.4) 98%,
                rgba(0, 0, 0, 0.6) 100%
            ),
            /* Sombras laterales finas */
                linear-gradient(
                    90deg,
                    rgba(0, 0, 0, 0.5) 0%,
                    rgba(0, 0, 0, 0.3) 2%,
                    rgba(0, 0, 0, 0.1) 4%,
                    transparent 6%,
                    transparent 94%,
                    rgba(0, 0, 0, 0.1) 96%,
                    rgba(0, 0, 0, 0.3) 98%,
                    rgba(0, 0, 0, 0.5) 100%
                ),
            /* Sombras verticales finas */
                linear-gradient(
                    0deg,
                    rgba(0, 0, 0, 0.4) 0%,
                    rgba(0, 0, 0, 0.2) 1%,
                    rgba(0, 0, 0, 0.1) 2%,
                    transparent 4%,
                    transparent 96%,
                    rgba(0, 0, 0, 0.1) 98%,
                    rgba(0, 0, 0, 0.2) 99%,
                    rgba(0, 0, 0, 0.4) 100%
                ),
            /* Esquinas sutiles para profundidad */ radial-gradient(ellipse 60px 40px at 0% 0%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%),
            radial-gradient(ellipse 60px 40px at 100% 0%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%),
            radial-gradient(ellipse 60px 40px at 0% 100%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%),
            radial-gradient(ellipse 60px 40px at 100% 100%, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%);
    }

    /* Phosphor glow effect sutil */
    .crt-effect {
        filter: contrast(1.1) saturate(1.3);
    }

    .crt-effect * {
        text-shadow:
            0 0 1px currentColor,
            0 0 2px rgba(255, 255, 255, 0.1);
    }

    /* Sin flicker effect para menos distracción */
    /* .crt-effect {
        animation: none;
    } */

    /* Animaciones suaves para CRT */
    @keyframes crt-scanlines {
        0% {
            transform: translateY(0);
        }
        100% {
            transform: translateY(3px);
        }
    }
}
.wavy {
    background-color: var(--color-main);
    --mask:
        radial-gradient(4.13px at 50% calc(100% + 0.9px), #0000 calc(99% - 2px), var(--color-main) calc(101% - 2px) 99%, #0000 101%) calc(50% - 6px)
            calc(50% - 2.5px + 0.5px) / 12px 5px repeat-x,
        radial-gradient(4.13px at 50% -0.9px, #0000 calc(99% - 2px), var(--color-main) calc(101% - 2px) 99%, #0000 101%) 50% calc(50% + 2.5px) / 12px 5px
            repeat-x;
    -webkit-mask: var(--mask);
    mask: var(--mask);
}

/* Corner crosses utility */
.corner-crosses {
    position: relative;
}

.corner-crosses::before,
.corner-crosses::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    pointer-events: none;
}

/* Top-left and top-right crosses */
.corner-crosses::before {
    top: -0.5px;
    left: -0.5px;
    background-image: linear-gradient(to right, var(--color-main) 1px, transparent 1px), linear-gradient(to bottom, var(--color-main) 1px, transparent 1px);
    background-position:
        0 3.5px,
        3.5px 0;
    background-size:
        8px 1px,
        1px 8px;
    background-repeat: no-repeat;
}

.corner-crosses::after {
    top: -0.5px;
    right: -0.5px;
    background-image: linear-gradient(to left, var(--color-main) 1px, transparent 1px), linear-gradient(to bottom, var(--color-main) 1px, transparent 1px);
    background-position:
        0 3.5px,
        4.5px 0;
    background-size:
        8px 1px,
        1px 8px;
    background-repeat: no-repeat;
}
