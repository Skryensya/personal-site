---
import type { GetStaticPathsOptions, Page } from 'astro';
import { type CollectionEntry, getCollection } from 'astro:content';
import siteConfig from '../../data/site-config';
import { sortItemsByDateDesc } from '../../utils/data-utils';
import ProjectsListPage from '@/components/pages/ProjectsListPage.astro';

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
    const allProjects = await getCollection('projects');
    const lang = 'es';

    const projectsInLang = allProjects
        .filter(project => project.id.startsWith(`${lang}/`))
        .sort(sortItemsByDateDesc);

    const paginatedPaths = paginate(projectsInLang, {
        pageSize: siteConfig.projectsPerPage || 10,
        props: { language: lang }
    });

    return paginatedPaths;
}

type Props = {
    page: Page<CollectionEntry<'projects'>>;
    language: string;
};

const { page, language } = Astro.props;
---

<ProjectsListPage lang="es" page={page} />