---
import type { GetStaticPathsOptions, Page } from 'astro';
import { type CollectionEntry, getCollection } from 'astro:content';
import siteConfig from '../../../data/site-config';
import { sortItemsByDateDesc } from '../../../utils/data-utils';
import ProjectsListPage from '@/components/pages/ProjectsListPage.astro';

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
    const allProjects = await getCollection('projects');
    const lang = 'en';

    const projectsInLang = allProjects
        .filter(project => project.id.startsWith(`${lang}/`))
        .sort(sortItemsByDateDesc);

    // For search functionality, we'll return all projects on the first page
    // and handle pagination through the search component
    return [{
        params: { page: undefined },
        props: {
            projects: projectsInLang,
            language: lang
        }
    }];
}

type Props = {
    projects: CollectionEntry<'projects'>[];
    language: string;
};

const { projects, language } = Astro.props;
---

<ProjectsListPage lang="en" projects={projects} useSearch={true} />