---
export interface Props {
    text: string;
    class?: string;
}

const { text, class: className } = Astro.props;
---

<div class:list={['isometric-text-container', className]}>
    <!-- Generate layers for depth effect -->
    <div class="isometric-text layer-1" aria-hidden="true">{text}</div>
    <div class="isometric-text layer-2" aria-hidden="true">{text}</div>
    <div class="isometric-text layer-3" aria-hidden="true">{text}</div>
    <div class="isometric-text layer-4" aria-hidden="true">{text}</div>
    <div class="isometric-text layer-5" aria-hidden="true">{text}</div>
    
    <!-- Main visible text layer -->
    <div class="isometric-text main-layer">{text}</div>
</div>
    
<style>
    .isometric-text-container {
        --layer-opacity: .45;
        position: relative;
        transform-style: preserve-3d;
        transform-origin: center center;
        perspective: 800px;
        perspective-origin: 30% 200%;
        display: inline-block;
    }

    .isometric-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform-origin: center center;
        font-weight: 900;
        font-family: 'JetBrains Mono', 'IBM Plex Mono', 'Courier New', monospace;
        font-variant-numeric: tabular-nums;
        font-feature-settings: "tnum" 1;
        font-size: 56px;
        white-space: nowrap;
        user-select: none;
        pointer-events: none;
        
        /* Base orthographic 3/4 transformation - more frontal with diagonal baseline */
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg);
    }

    /* Main visible layer - now the back/static layer */
    .main-layer {
        color: rgb(var(--color-main));
        z-index: 1;
        opacity: var(--layer-opacity);
    }

    /* Depth layers - all in same position initially */
    .layer-1 {
        color: rgb(var(--color-main));
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(0px);
        opacity: var(--layer-opacity);
        z-index: 2;
        transition: transform 0.3s ease;
    }

    .layer-2 {
        color: rgb(var(--color-main));
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(0px);
        opacity: var(--layer-opacity);
        z-index: 3;
        transition: transform 0.3s ease;
    }

    .layer-3 {
        color: rgb(var(--color-main));
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(0px);
        opacity: var(--layer-opacity);
        z-index: 4;
        transition: transform 0.3s ease;
    }

    .layer-4 {
        color: rgb(var(--color-main));
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(0px);
        opacity: var(--layer-opacity);
        z-index: 5;
        transition: transform 0.3s ease;
    }

    .layer-5 {
        color: rgb(var(--color-main));
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(0px);
        opacity: var(--layer-opacity);
        z-index: 6;
        transition: transform 0.3s ease;
    }


    /* Hover effect for extra depth */
    .isometric-text-container:hover .isometric-text-container {
        transition: transform 0.3s ease;
    }

    .isometric-text-container:hover .main-layer {
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(0px);
        transition: transform 0.3s ease;
    }

    /* Enhanced depth layers on hover with Z-axis separation only */
    .isometric-text-container:hover .main-layer { opacity: 0.15; }
    .isometric-text-container:hover .layer-1 { 
        opacity: var(--layer-opacity); 
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(8px);
    }
    .isometric-text-container:hover .layer-2 { 
        opacity: var(--layer-opacity); 
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(16px);
    }
    .isometric-text-container:hover .layer-3 { 
        opacity: var(--layer-opacity); 
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(24px);
    }
    .isometric-text-container:hover .layer-4 { 
        opacity: var(--layer-opacity); 
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(32px);
    }
    .isometric-text-container:hover .layer-5 { 
        opacity: var(--layer-opacity); 
        transform: translate(-50%, -50%) 
                   rotateX(-25deg) 
                   rotateY(-25deg) 
                   rotateZ(30deg) 
                   translateZ(40px);
    }
</style>