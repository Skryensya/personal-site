---
import BigSectionContainer from '../BigSectionContainer.astro';
import { getTranslations } from '@/i18n/utils';
import { defaultLang, type Language } from '@/i18n/ui';

interface Props {
    lang?: Language;
}

const { lang = defaultLang } = Astro.props;
const t = getTranslations(lang);
const sectionTitle: string = t('home.technologies');

const technologies = [
    { href: 'https://react.dev/', text: 'React' },
    { href: 'https://www.typescriptlang.org/', text: 'TypeScript' },
    { href: 'https://nodejs.org/', text: 'Node.js' },
    { href: 'https://astro.build/', text: 'Astro' },
    { href: 'https://www.postgresql.org/', text: 'PostgreSQL' },
    { href: 'https://aws.amazon.com/', text: 'AWS' },
    { href: 'https://tailwindcss.com/', text: 'Tailwind CSS' },
    { href: 'https://www.figma.com/', text: 'Figma' },
    { href: 'https://www.framer.com/', text: 'Framer' },
    { href: 'https://vercel.com/', text: 'Vercel' },
    { href: 'https://www.docker.com/', text: 'Docker' },
    { href: 'https://kubernetes.io/', text: 'Kubernetes' },
    { href: 'https://www.jenkins.io/', text: 'Jenkins' },
    { href: 'https://www.ansible.com/', text: 'Ansible' },
    { href: 'https://www.terraform.io/', text: 'Terraform' },
    { href: 'https://www.elastic.co/', text: 'Elasticsearch' },
    { href: 'https://redis.io/', text: 'Redis' },
    { href: 'https://graphql.org/', text: 'GraphQL' },
    { href: 'https://www.apollographql.com/', text: 'Apollo' },
    { href: 'https://www.prisma.io/', text: 'Prisma' },
    { href: 'https://nextjs.org/', text: 'Next.js' },
    { href: 'https://vitejs.dev/', text: 'Vite' },
    { href: 'https://jestjs.io/', text: 'Jest' },
    { href: 'https://testing-library.com/', text: 'Testing Library' },
    { href: 'https://playwright.dev/', text: 'Playwright' },
    { href: 'https://storybook.js.org/', text: 'Storybook' },
    { href: 'https://www.gatsbyjs.com/', text: 'Gatsby' },
    { href: 'https://www.electronjs.org/', text: 'Electron' },
    { href: 'https://www.djangoproject.com/', text: 'Django' },
    { href: 'https://rubyonrails.org/', text: 'Ruby on Rails' }
];
---

<BigSectionContainer title={sectionTitle} id="tecnologia" style="view-transition-name: technologies-section;">
    <div class="relative overflow-hidden border border-main bg-secondary" data-marquee>
        <div class="marquee-track" aria-hidden="true">
            {([...technologies, ...technologies]).map((item, index) => (
                <a
                    href={item.href}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="marquee-item font-mono text-xs uppercase tracking-[0.3em] px-6 py-3 border-r border-main whitespace-nowrap hover:bg-main hover:text-secondary transition-colors"
                    data-index={index}
                >
                    {item.text}
                </a>
            ))}
        </div>
    </div>
</BigSectionContainer>

<style is:inline>
    [data-marquee] {
        mask-image: linear-gradient(90deg, transparent 0%, black 10%, black 90%, transparent 100%);
    }

    .marquee-track {
        display: flex;
        gap: 0;
        width: max-content;
        animation: marquee-scroll 45s linear infinite;
    }

    .marquee-item {
        display: inline-flex;
        align-items: center;
    }

    @keyframes marquee-scroll {
        from {
            transform: translateX(0);
        }
        to {
            transform: translateX(-50%);
        }
    }
</style>
