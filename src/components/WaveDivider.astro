---
interface Props {
    layers?: number;
    offset?: number;
    className?: string;
    inverted?: boolean;
}

const {
    layers = 5,
    offset = 12,
    className = '',
    inverted = false
} = Astro.props;

// Generate array for layers
const layerArray = Array.from({ length: layers }, (_, i) => i);
---

<div class={`relative w-full h-40 overflow-hidden ${inverted ? 'bg-main' : 'bg-secondary'} ${className}`}>
    {layerArray.map((_, index) => (
        <div
            class="absolute bottom-0 left-0 w-full h-full wave-layer"
            style={`
                transform: translateY(${index * offset}px);
                z-index: ${layers - index};
            `}
            data-layer={index}
        >
            <svg 
                class="w-full h-full bg-transparent"
                style={`opacity: ${1 - (index * 0.2)};`}
                viewBox="0 0 900 450" 
                preserveAspectRatio="none"
            >
                <path
                    d="M0 157L9.3 167.2C18.7 177.3 37.3 197.7 56.2 195C75 192.3 94 166.7 112.8 149.7C131.7 132.7 150.3 124.3 169 122.8C187.7 121.3 206.3 126.7 225 139.3C243.7 152 262.3 172 281.2 169.2C300 166.3 319 140.7 337.8 130.3C356.7 120 375.3 125 394 139.7C412.7 154.3 431.3 178.7 450 182C468.7 185.3 487.3 167.7 506.2 155.7C525 143.7 544 137.3 562.8 142.7C581.7 148 600.3 165 619 159.8C637.7 154.7 656.3 127.3 675 124.8C693.7 122.3 712.3 144.7 731.2 148C750 151.3 769 135.7 787.8 139.8C806.7 144 825.3 168 844 168.5C862.7 169 881.3 146 890.7 134.5L900 123L900 0L890.7 0C881.3 0 862.7 0 844 0C825.3 0 806.7 0 787.8 0C769 0 750 0 731.2 0C712.3 0 693.7 0 675 0C656.3 0 637.7 0 619 0C600.3 0 581.7 0 562.8 0C544 0 525 0 506.2 0C487.3 0 468.7 0 450 0C431.3 0 412.7 0 394 0C375.3 0 356.7 0 337.8 0C319 0 300 0 281.2 0C262.3 0 243.7 0 225 0C206.3 0 187.7 0 169 0C150.3 0 131.7 0 112.8 0C94 0 75 0 56.2 0C37.3 0 18.7 0 9.3 0L0 0Z"
                    fill={inverted ? "var(--color-secondary)" : "var(--color-main)"}
                    stroke={inverted ? "var(--color-secondary)" : "var(--color-main)"}
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="miter"
                />
            </svg>
        </div>
    ))}
</div>
 