---
import ReadingGuide from './ReadingGuide';
import ScrollProgress from './ScrollProgress';
import Sidebar from './Sidebar.astro';
import { defaultLang, type Language } from '@/i18n/ui';

interface Props {
    contentId?: string;
    sidebarClassName?: string;
    containerClassName?: string;
    contentClassName?: string;
    lang?: Language;
}

const { 
    contentId = 'main-content',
    sidebarClassName = '',
    containerClassName = '',
    contentClassName = '',
    lang = defaultLang
} = Astro.props;
---

<!-- Reading Guide and Scroll Progress (global components) -->
<ScrollProgress client:load />
<ReadingGuide client:load />

<!-- Full height layout with content and sidebar -->
<div class={`flex min-h-screen ${containerClassName}`} id={`${contentId}-container`}>
    <!-- Main content area -->
    <main class={`mx-auto min-w-0 w-fit max-w-[850px] ${contentClassName}`} id={contentId}>
        <slot />
    </main>
    
    <!-- Desktop Sidebar -->
    <Sidebar 
        contentId={contentId}
        className={sidebarClassName}
        lang={lang}
    />
</div>