---
import { useTranslations } from '@/i18n/utils';
import { defaultLang, type Language } from '@/i18n/ui';
import ThemedImage from '@/components/ThemedImage.astro';
import CVTag from '@/components/CVTag.tsx';

interface Props {
    lang?: Language;
}

const { lang = defaultLang } = Astro.props;
const t = useTranslations(lang);
---

<div class="bg-secondary text-main">
    <div class="w-full">
        
        <!-- Professional Header with Image -->
        <header class="print:mb-4 print:!block">
            <div class="flex justify-between items-start print:flex">
                <div class="text-left flex-1">
                    <h1 class="text-4xl font-bold mb-1 pt-1">ALLISON JOSUÉ PEÑA BARRIOS</h1>
                    <p class="text-base font-semibold">Desarrollador Full-Stack</p> 
                </div>
                <div class="print:w-24 w-24 lg:w-28 aspect-square ml-6 flex-shrink-0 overflow-hidden rounded-full">
                    <ThemedImage 
                        src="/me.png" 
                        alt="Allison Peña" 
                        class="w-full h-full"
                    />
                </div>
            </div>
        </header>

        <div class="flex flex-nowrap gap-4 mb-6">
            <!-- Left Sidebar: Contact Information -->
            <div class="min-w-[200px] space-y-3">
                <section>
                    <h2 class="text-base font-bold uppercase border-b-2 border-main mb-2">Contacto</h2>
                    
                    <div class="space-y-2">
                        <!-- Location -->
                        <div class="flex gap-1.5">
                            <svg class="w-4 h-4 text-main mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <div>
                                <span class="font-bold uppercase text-sm block opacity-80">Ubicación</span>
                                <span class="font-mono text-main block text-sm">Santiago, Chile</span>
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="flex gap-1.5">
                            <svg class="w-4 h-4 text-main mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.73c.7.42 1.52.42 2.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            <div>
                                <span class="font-bold uppercase text-sm block opacity-80">Email</span>
                                <a href="mailto:Allison.jpb+cv@gmail.com" class="font-mono text-main hover:underline hover:opacity-70 print:no-underline block text-xs break-all">
                                    Allison.jpb+cv@gmail.com
                                </a>
                            </div>
                        </div>

                        <!-- Phone -->
                        <div class="flex gap-1.5">
                            <svg class="w-4 h-4 text-main mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                            <div>
                                <span class="font-bold uppercase text-sm block opacity-80">Teléfono</span>
                                <a href="tel:+56998120052" class="font-mono text-main hover:underline hover:opacity-70 print:no-underline block text-sm">
                                    +56 9 9812 0052
                                </a>
                            </div>
                        </div>

                        <!-- LinkedIn -->
                        <div class="flex gap-1.5">
                            <svg class="w-4 h-4 text-main mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path>
                            </svg>
                            <div>
                                <span class="font-bold uppercase text-sm block opacity-80">LinkedIn</span>
                                <a href="https://linkedin.com/in/skryensya" target="_blank" rel="noopener noreferrer" class="font-mono text-main hover:underline hover:opacity-70 print:no-underline block text-sm">
                                    /in/skryensya
                                </a>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Languages -->
                <section>
                    <h2 class="text-base font-bold uppercase border-b-2 border-main mb-2">Idiomas</h2>
                    <div class="space-y-1.5">
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-mono">Español</span>
                            <CVTag text="NATIVO" />
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-mono">Inglés</span>
                            <CVTag text="C1 - AVANZADO" />
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-mono">Noruego</span>
                            <CVTag className="opacity-70" text="A1 - BÁSICO" />
                        </div>
                    </div>
                </section>

                <!-- Certifications -->
                <section>
                    <h2 class="text-base font-bold uppercase border-b-2 border-main mb-2">Certificados</h2>
                    
                    <div class="space-y-1.5">
                        <div class="border-l-4 border-main pl-3">
                            <div class="flex items-center gap-1.5 mb-1">
                                <span class="w-2 h-2 bg-main"></span>
                                <h3 class="font-bold text-SM text-main">WAI0.1x</h3>
                            </div>
                            <p class="text-SM opacity-80">Introduction to Web Accessibility</p>
                        </div>
                    </div>
                </section>

                <!-- References -->
                <section>
                    <h2 class="text-base font-bold uppercase border-b-2 border-main mb-2">Referencias</h2>
                    
                    <div class="space-y-2">
                        <!-- Reference 1 -->
                        <div class="border-l-4 border-main pl-3">
                            <div class="flex items-center gap-1.5 mb-1">
                                <span class="w-2 h-2 bg-main"></span>
                                <h3 class="font-bold text-xs text-main">Jorge Vega</h3>
                            </div>
                            <p class="text-xs opacity-80 mb-1">Senior Developer</p>
                            <div class="text-xs font-mono bg-main text-secondary px-1 py-0.5 font-bold mb-1 w-fit">
                                ASIMOV
                            </div>
                            <a href="mailto:jorgeivegab+rf@gmail.com" class="text-xs font-mono text-main hover:underline block break-all">
                               jorgeivegab+rf@gmail.com
                            </a>
                        </div>

                        <!-- Reference 2 -->
                        <div class="border-l-4 border-main pl-3">
                            <div class="flex items-center gap-1.5 mb-1">
                                <span class="w-2 h-2 bg-main"></span>
                                <h3 class="font-bold text-xs text-main">Elias Leyton</h3>
                            </div>
                            <p class="text-xs opacity-80 mb-1">Senior Developer</p>
                            <div class="text-xs font-mono bg-main text-secondary px-1 py-0.5 font-bold mb-1 w-fit">
                                ASIMOV
                            </div>
                            <a href="mailto:Elias.leyton+rf@gmail.com" class="text-xs font-mono text-main hover:underline block break-all">
                                elias.leyton+rf@gmail.com
                            </a>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Content: About Me, Experience and References -->
            <div class=" space-y-4">
                <!-- Professional Summary -->
                <section>
                    <h2 class="text-base font-bold uppercase border-b-2 border-main mb-2">Acerca de mí</h2>
                    <p class="text-sm leading-snug italic">
                        Transformo ideas en experiencias digitales que realmente funcionan. Mi especialidad es crear 
                        interfaces accesibles que miles de usuarios utilizan diariamente, aplicando las mejores 
                        prácticas de desarrollo frontend con un enfoque obsesivo en la usabilidad.
                    </p>
                </section>

                <!-- Experience Section -->
                <section>
                    <h2 class="text-base font-bold uppercase border-b-2 border-main mb-2">
                        EXPERIENCIA PROFESIONAL
                    </h2>
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="text-2xl font-bold text-main">Asimov Consultores</div>
                            <p class="text-xs font-semibold text-main/80">Desarrollador Full-Stack</p>
                        </div>
                        <div class="text-xs font-semibold bg-main text-secondary px-2 py-0.5 mt-1">
                            2022 - Presente
                        </div>
                    </div>
                    <p class="text-sm leading-relaxed italic mb-4">
                      Desarrollo soluciones digitales completas, transformando conceptos en código funcional. He sido colaborador clave en proyectos que mejoran la identidad digital y experiencia de usuario de nuestros clientes, implementando interfaces y sistemas backend efectivos en todo el ciclo de desarrollo.
                    </p>

                    <!-- Featured Projects -->
                    <div class="mt-3">
                        <h2 class="text-base font-bold uppercase border-b-2 border-main mb-2">
                            Proyectos Destacados
                        </h2>
                        <div class="space-y-2 pl-3 ml-3 border-l">
                            <!-- Kit Digital UC -->
                            <div class="relative">
                                <h4 class="font-bold text-sm text-main mb-0.5 relative before:content-[''] before:absolute before:left-[-18px] before:top-[4px] before:h-3 before:w-3 before:rounded-full before:bg-secondary before:border before:border-main print:before:!bg-black">
                                    Kit Digital UC</h4>
                                <p class="text-sm mb-1">
                                    Librería de componentes para el ecosistema de sitios web de la Universidad Católica (100+ sitios). Desarrollo de componentes accesibles siguiendo estándares WCAG 2.1 AA.
                                </p>
                                <div class="flex flex-wrap gap-0.5">
                                    <CVTag text="JavaScript" />
                                    <CVTag text="HTML" />
                                    <CVTag text="CSS (SASS)" />
                                    <CVTag text="Rollup" />
                                    <CVTag text="Vue.js" />
                                    <CVTag text="Nuxt.js" />
                                </div>
                            </div>

                            <!-- API Agenda UC -->
                            <div>
                                <h4 class="font-bold text-sm text-main mb-0.5 relative before:content-[''] before:absolute before:left-[-18px] before:top-[4px] before:h-3 before:w-3 before:rounded-full before:bg-secondary before:border before:border-main print:before:!bg-black">API Agenda UC</h4>
                                <p class="text-sm mb-1">
                                    Sistema completo de gestión de eventos universitarios. Desarrollo del Frontend completo y colaboración en el diseño del modelo de datos de la API.
                                </p>
                                <div class="flex flex-wrap gap-0.5">
                                    <CVTag text="Node.js (Strapi CMS)" />
                                    <CVTag text="MySQL" />
                                    <CVTag text="React (Next.js)" />
                                    <CVTag text="Kit Digital UC" />
                                </div>
                            </div>

                            <!-- Portal UC -->
                            <div>
                                <h4 class="font-bold text-sm text-main mb-0.5 relative before:content-[''] before:absolute before:left-[-18px] before:top-[4px] before:h-3 before:w-3 before:rounded-full before:bg-secondary before:border before:border-main print:before:!bg-black">Portal UC</h4>
                                <p class="text-sm mb-1">
                                    Sitio web principal de la universidad. Desarrollo de funcionalidades y mantenimiento enfocado en accesibilidad, navegación y SEO.
                                </p>
                                <div class="flex flex-wrap gap-0.5">
                                    <CVTag text="PHP (Processwire CMS)" />
                                    <CVTag text="Vue.js" />
                                    <CVTag text="Kit Digital UC" />
                                </div>
                            </div>

                            <!-- Barrancas -->
                            <div>
                                <h4 class="font-bold text-sm text-main mb-0.5 relative before:content-[''] before:absolute before:left-[-18px] before:top-[4px] before:h-3 before:w-3 before:rounded-full before:bg-secondary before:border before:border-main print:before:!bg-black">Barrancas</h4>
                                <p class="text-sm mb-1">
                                    Plataforma de encuestas para escuelas, diseñada para identificar y apoyar estudiantes en riesgo. Full-stack development y desarrollo continuo.
                                </p>
                                <div class="flex flex-wrap gap-0.5">
                                    <CVTag text="Vue.js" />
                                    <CVTag text="Tailwind" />
                                    <CVTag text="AdonisJS" />
                                    <CVTag text="MySQL" />
                                    <CVTag text="Python" />
                                </div>
                            </div>

                            <!-- Kit Digital USS -->
                            <div>
                                <h4 class="font-bold text-sm text-main mb-0.5 relative before:content-[''] before:absolute before:left-[-18px] before:top-[4px] before:h-3 before:w-3 before:rounded-full before:bg-secondary before:border before:border-main print:before:!bg-black">Kit Digital USS (En Desarrollo)</h4>
                                <p class="text-sm mb-1">
                                    Dos librerías de componentes (Vanilla JS y React) más robustas y accesibles. Desarrollo de ambas librerías y documentación técnica.
                                </p>
                                <div class="flex flex-wrap gap-0.5">
                                    <CVTag text="JavaScript" />
                                    <CVTag text="HTML" />
                                    <CVTag text="CSS (SASS)" />
                                    <CVTag text="Rollup" />
                                    <CVTag text="React" />
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>