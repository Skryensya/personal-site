---
import Layout from '@/layouts/Layout.astro';
import ContentPage from '@/components/ContentPage.astro';
import Button from '@/components/Button.astro';
import CVFirstPage from '@/components/CVFirstPage.astro';
import { getTranslations } from '@/i18n/utils';
import { defaultLang, type Language } from '@/i18n/ui';

interface Props {
  lang?: Language;
}

const { lang = defaultLang } = Astro.props;
const t = getTranslations(lang);

const meta = {
  es: { title: 'Allison Peña - CV', description: 'CV de Allison Peña' },
  en: { title: 'Allison Peña - Resume', description: "Allison Peña's Resume" },
  no: { title: 'Allison Peña - CV', description: 'Allison Peña CV' },
}[lang];
---

<Layout title={meta.title} description={meta.description} lang={lang}>
  <ContentPage contentId="cv-content" lang={lang} contentClassName="space-y-6 md:space-y-10">
    <!-- Header actions -->
    <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
      <h1 class="h2">{t('cv.title')}</h1>
      <div class="flex flex-wrap gap-2">
        <Button href="/cv.pdf" variant="normal" filled elevated download="Allison_Peña_Desarrollador_fullstack.pdf">
          {lang === 'es' ? 'Descargar CV' : lang === 'no' ? 'Last ned CV' : 'Download CV'}
        </Button>
      </div>
    </header>

    <!-- CV content (regular flow, no print-page simulation) -->
    <section class="bg-main/10 border border-main p-4 md:p-6">
      <CVFirstPage lang={lang} />
    </section>
  </ContentPage>
</Layout>
