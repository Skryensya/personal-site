---
import Layout from '@/layouts/Layout.astro';
import CVPageLayout from '@/components/CVPage.astro';
import CVFirstPage from '@/components/CVFirstPage.astro';
import Button from '@/components/Button.astro';
import ContentPage from '@/components/ContentPage.astro';
import { getTranslations } from '@/i18n/utils';
import { defaultLang, type Language } from '@/i18n/ui';

interface Props {
    lang?: Language;
}

const { lang = defaultLang } = Astro.props;
const t = getTranslations(lang);

// Get localized title and description
const getLocalizedMeta = (language: Language) => {
    switch (language) {
        case 'en':
            return {
                title: 'Allison Peña - Resume',
                description: "Allison Peña's Resume"
            };
        case 'no':
            return {
                title: 'Allison Peña - CV',
                description: 'Allison Peña CV'
            };
        default:
            return {
                title: 'Allison Peña - CV',
                description: 'CV de Allison Peña'
            };
    }
};

const { title, description } = getLocalizedMeta(lang);
---

<Layout title={title} description={description} lang={lang}>
    <ContentPage
        contentId="cv-content"
        containerClassName="print:block"
        contentClassName="print:min-w-full"
        sidebarClassName="print:hidden"
        lang={lang}
    >
        <!-- Responsive container: normal flow on mobile, sheets on desktop -->
        <div class="space-y-8 mb-20 print:space-y-0 print:mb-0 w-fit">
            <CVPageLayout>
                <CVFirstPage lang={lang} />
            </CVPageLayout>
        </div>
    </ContentPage>
    <style>
        @layer base {
            :root {
                /* Variables para ajustar el tamaño de impresión */
                --print-width: 100vw;
                --print-height: 90vh;
                --print-padding: 0mm;
                --print-border-width: 2px;
            }

            @page {
                size: A4;
                margin: 4mm;
            }
        }

        @layer utilities {
            .cv-page-print {
                width: var(--print-width) !important;
                height: var(--print-height) !important;
                min-height: var(--print-height) !important;
                max-height: var(--print-height) !important;
                /* margin: 0 auto !important; */
                padding: var(--print-padding) !important;
                border: var(--print-border-width) solid black !important;
                box-sizing: border-box !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                background: white !important;
                color: black !important;
                font-family: 'Times New Roman', serif !important;
                --color-main: black !important;
                --color-secondary: white !important;
            }
        }
    </style>
</Layout>