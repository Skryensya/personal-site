---
import { getTranslations } from '@/i18n/utils';
import { defaultLang, type Language } from '@/i18n/ui';
import CVContactSidebar from './CVContactSidebar.astro';

interface Props {
    lang?: Language;
    contentClassName?: string;
    sidebarClassName?: string;
    containerClassName?: string;
}

const { 
    lang = defaultLang,
    contentClassName = '',
    sidebarClassName = '',
    containerClassName = ''
} = Astro.props;

const t = getTranslations(lang);
---

<div class={`flex min-h-screen ${containerClassName}`}>
    <!-- Contact Sidebar -->
    <CVContactSidebar 
        lang={lang} 
        className={sidebarClassName}
    />

    <!-- Main Content Area -->
    <div class={`flex-1 px-6 py-8 lg:px-8 ${contentClassName}`}>
        <slot />
    </div>
</div>

<!-- Mobile Contact Header (shown only on mobile when sidebar is hidden) -->
<div class="lg:hidden bg-secondary border-b-2 border-main p-4 print:hidden">
    <div class="flex items-center gap-4">
        <div class="w-16 h-16 rounded-full overflow-hidden border-2 border-main flex-shrink-0">
            <img src="/img/me.png" alt="Allison Peña" class="w-full h-full object-cover">
        </div>
        <div class="flex-1 min-w-0">
            <h1 class="text-lg font-bold leading-tight">ALLISON JOSUÉ PEÑA BARRIOS</h1>
            <p class="text-sm font-semibold text-main opacity-80">Desarrollador Full-Stack</p>
            <div class="flex items-center gap-4 mt-2 text-xs font-mono">
                <a href="mailto:Allison.jpb+cv@gmail.com" class="text-main hover:underline">
                    Email
                </a>
                <a href="tel:+56998120052" class="text-main hover:underline">
                    Teléfono
                </a>
                <a href="https://linkedin.com/in/skryensya" target="_blank" rel="noopener" class="text-main hover:underline">
                    LinkedIn
                </a>
            </div>
        </div>
        <button onclick="window.print()" class="bg-main text-secondary border-2 border-main px-4 py-2 font-mono text-xs font-bold uppercase">
            Imprimir CV
        </button>
    </div>
</div>

<style>
    @media print {
        .lg\\:hidden {
            display: none !important;
        }
        
        /* Print-specific mobile header */
        .print\\:block {
            display: block !important;
        }
        
        /* Ensure single column layout for print */
        .flex {
            display: block !important;
        }
        
        /* Hide sidebar on print */
        aside {
            display: none !important;
        }
        
        /* Full width content on print */
        .flex-1 {
            width: 100% !important;
            padding: 0 !important;
            margin: 0 !important;
        }
    }
</style>